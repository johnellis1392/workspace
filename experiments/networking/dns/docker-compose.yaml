version: '3.3'

services:
  host1:
    build:
      context: ./
      dockerfile: ./host1/Dockerfile
    environment:
      PORT: 3000
    # ports:
    #   - 5000:80
    hostname: host1.homelab.local
    networks:
      dns_network:
        ipv4_address: 10.1.100.90

  ns1:
    build:
      context: ./
      dockerfile: ./ns1/Dockerfile
    environment:
      PORT: 3000
      SERVER_NAME: "NS1"
    # ports:
    #   - 5001:3000
    hostname: ns1.homelab.local
    networks:
      dns_network:
        ipv4_address: 10.1.100.41

  ns2:
    build:
      context: ./
      dockerfile: ./ns2/Dockerfile
    environment:
      PORT: 3000
      SERVER_NAME: "NS2"
    # ports:
    #   - 5002:3000
    hostname: ns2.homelab.local
    networks:
      dns_network:
        ipv4_address: 10.1.100.42


networks:
  dns_network:
    driver: bridge
    ipam:
      config:
        - subnet: 10.5.0.0/16
          # gateway: 10.5.0.1
