version: '3.3'

# Adaptation of the dns tutorial at:
# https://techpolymath.com/2015/02/16/how-to-setup-a-dns-server-for-a-home-lab-on-ubuntu-14-04/
services:

  # Host container
  host1:
    image: dns_base_image
    environment:
      PORT: 3000
      SERVER_NAME: "HOST1"
    hostname: host1.homelab.local
    networks:
      dns_network:
        ipv4_address: 10.1.100.90
    # entrypoint:
    #   - /bin/bash


  # First dns child container
  ns1:
    image: dns_base_image
    environment:
      PORT: 3000
      SERVER_NAME: "NS1"
    hostname: ns1.homelab.local
    networks:
      dns_network:
        ipv4_address: 10.1.100.41


  # Second dns child container
  ns2:
    image: dns_base_image
    environment:
      PORT: 3000
      SERVER_NAME: "NS2"
    hostname: ns2.homelab.local
    networks:
      dns_network:
        ipv4_address: 10.1.100.42


networks:
  dns_network:
    driver: bridge
    ipam:
      config:
        - subnet: 10.1.100.0/24
